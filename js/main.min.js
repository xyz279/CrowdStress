var _0x54d3=['#19b5fe','closePath','fillStyle','white','direction','arc','down','fill','drawGrid','drawWalls','drawHumans','random','round','input[type=number],\x20input[type=range]','wheel','dataset','value','toFixed','createElement','div','popup','innerHTML','style','left','appendChild','options','top','dropdown','<ul>','keys','<li\x20class=\x22menu-item\x20','\x22\x20id=\x22','<div>','</div></li>','<div\x20class=\x22dropdown-separator\x22></div>','</ul>','push','status','innerText','writeFile','log','showSaveDialog','preset.xml','XML','xml','indexOf','.xml','Сохранение...','message','Файл\x20сохранен','showOpenDialog','utf-8','room','mousemove','offsetX','offsetY','cursor','pointer','#f62459','Файл\x20не\x20сохранен','erase-wall','img/undo-active.svg','erase-exit','Builder','buildObject','right','sqrt','pow','abs','atan2','crossing','module','black','angle','cos','distToHuman','normal_h','tau_h','sin','setWallsDistances','distToWall','tau_w','normal_w','f_2','exp','f_3','scalar','f_4','f_5','acceleration','red','sum','green','blue','yellow','violet','mainVector','velocity','#1e824c','event','keyCode','untitled','ctrlKey','crosshair','.direction-button','wall','img/redo-active.svg','img/redo-inactive.svg','default','tool','type','object','string','constructor','while\x20(true)\x20{}','apply','counter','gger','call','action','debu','stateObject','function\x20*\x5c(\x20*\x5c)','\x5c+\x5c+\x20*(?:_0x(?:[a-f0-9]){4,6}|(?:\x5cb|\x5cd)[a-z0-9]{1,4}(?:\x5cb|\x5cd))','test','input','electron','remote','BrowserWindow','xml2js','parseString','path','canvas','readFileSync','join','view-settings.html','getElementById','addEventListener','close-button','click','send','asynchronous-message','toString','asynchronous-reply','save','minimize-button','getCurrentWindow','body','onload','none','offsetWidth','width','offsetHeight','height','createFileButton','showMessageBox','warning','Сохранить','Отмена','Предупреждение','Сохранить\x20изменения\x20в\x20файле?','info','Новый\x20проект','clearRect','update','openFileButton','Не\x20сохранять','saveFileButton','undoButton','length','redoButton','runButton','childNodes','src','img/pause.svg','title','Пауза','stopButton','classList','remove','img/stop-active.svg','querySelectorAll','.toolbox-item','active','add','disabled','.menubar-item','img/play.svg','Запустить','img/stop-inactive.svg','viewSettingsButton','offsetLeft','offsetTop','showVectors','checked','change','showDirections','Создать','Ctrl\x20+\x20N','createFile','Открыть','openFile','separator','Ctrl\x20+\x20S','saveFile','Сохранить\x20как','saveFileAs','exit','Отменить','Ctrl\x20+\x20Z','undo','Ctrl\x20+\x20Y','redo','Очистить\x20все','clearAll','walls','Выход','directions','place','Уничтожить','eraser','Инструкция','instruction','О\x20программе','about','mouseover','removeChild','contains','menubar-item','splice','clear-all','img/undo-inactive.svg','exits','CrowdStress\x20v0.9.0\x0aby\x20hood52\x20\x0aⒸ\x202019','item','getContext','drawExits','drawDirections','setDirection','setHumansDistances','F_2','F_3','F_4','F_5','deleteEscaped','move','requestAnimationFrame','strokeStyle','lineWidth','beginPath','lineTo','stroke','moveTo','gray'];(function(_0x17ba44,_0x5992d0){var _0x9b1229=function(_0x428330){while(--_0x428330){_0x17ba44['push'](_0x17ba44['shift']());}};_0x9b1229(++_0x5992d0);}(_0x54d3,0x7a));var _0x39e9=function(_0x1a624d,_0x341de6){_0x1a624d=_0x1a624d-0x0;var _0x386033=_0x54d3[_0x1a624d];return _0x386033;};var _0x23c3b1=function(){var _0xe5be43=!![];return function(_0x4affac,_0x316032){var _0x1aec01=_0xe5be43?function(){if(_0x316032){var _0x2dcc2d=_0x316032['apply'](_0x4affac,arguments);_0x316032=null;return _0x2dcc2d;}}:function(){};_0xe5be43=![];return _0x1aec01;};}();(function(){_0x23c3b1(this,function(){var _0x33f2a9=new RegExp(_0x39e9('0x0'));var _0x5a71a6=new RegExp(_0x39e9('0x1'),'i');var _0x4fdfac=_0x24c218('init');if(!_0x33f2a9[_0x39e9('0x2')](_0x4fdfac+'chain')||!_0x5a71a6[_0x39e9('0x2')](_0x4fdfac+_0x39e9('0x3'))){_0x4fdfac('0');}else{_0x24c218();}})();}());const electron=require(_0x39e9('0x4'));const {ipcRenderer}=require('electron');const BrowserWindow=electron[_0x39e9('0x5')][_0x39e9('0x6')];const remote=require(_0x39e9('0x4'))[_0x39e9('0x5')];const {dialog}=require(_0x39e9('0x4'))[_0x39e9('0x5')];const fs=require('fs');const parseXML=require(_0x39e9('0x7'))[_0x39e9('0x8')];const path=require(_0x39e9('0x9'));const canvas=_0x39e9('0xa');const step=0x14;var ctx;var WIDTH;var HEIGHT;var humans=[];var showVectors=![];var showDirections=![];var walls=[];var exits=[];var humansPlaces=[];var escapedNumber=0x0;var currentTool=null;var isRunning=![];var isPaused=![];var openedFile=null;var isModified=![];var speed=0x1;var operationStack=[];var currentOperation=-0x1;var viewSettings=fs[_0x39e9('0xb')](path[_0x39e9('0xc')](__dirname,_0x39e9('0xd')));function $(_0x1da754){return document[_0x39e9('0xe')](_0x1da754);}document[_0x39e9('0xf')]('keydown',keyPress);$(_0x39e9('0x10'))['addEventListener'](_0x39e9('0x11'),()=>{ipcRenderer[_0x39e9('0x12')](_0x39e9('0x13'),isModified[_0x39e9('0x14')]());ipcRenderer['on'](_0x39e9('0x15'),(_0xd32117,_0x24293e)=>{if(_0x24293e==_0x39e9('0x16')){let _0x465b87=exportPreset();if(openedFile!=null){savePreset(_0x465b87);}else{savePresetAs(_0x465b87);}}});});$(_0x39e9('0x17'))[_0x39e9('0xf')](_0x39e9('0x11'),()=>{let _0x1aaa64=remote[_0x39e9('0x18')]();_0x1aaa64['minimize']();});document[_0x39e9('0x19')][_0x39e9('0x1a')]=function(){currentTool=_0x39e9('0x1b');WIDTH=$(canvas)[_0x39e9('0x1c')];$(canvas)[_0x39e9('0x1d')]=WIDTH;HEIGHT=$(canvas)[_0x39e9('0x1e')];$(canvas)[_0x39e9('0x1f')]=HEIGHT;$(_0x39e9('0x20'))[_0x39e9('0xf')](_0x39e9('0x11'),()=>{if(isModified){dialog[_0x39e9('0x21')]({'type':_0x39e9('0x22'),'buttons':[_0x39e9('0x23'),'Не\x20сохранять',_0x39e9('0x24')],'title':_0x39e9('0x25'),'message':_0x39e9('0x26')},_0x35929d=>{if(_0x35929d==0x0){let _0x1696a6=exportPreset();if(openedFile!=null){savePreset(_0x1696a6);}else{savePresetAs(_0x1696a6);}}if(_0x35929d==0x1){$(_0x39e9('0x27'))['innerText']=_0x39e9('0x28');isModified=![];isRunning=![];humansPlaces=[];peopleNumber=0x0;humans=[];speed=0x1;ctx[_0x39e9('0x29')](0x0,0x0,WIDTH,HEIGHT);walls=[];wallsNumber=0x0;exits=[];exitsNumber=0x0;Tools[_0x39e9('0x2a')]();}});}else{$(_0x39e9('0x27'))['innerText']='Новый\x20проект';isModified=![];isRunning=![];humansPlaces=[];peopleNumber=0x0;humans=[];speed=0x1;ctx[_0x39e9('0x29')](0x0,0x0,WIDTH,HEIGHT);walls=[];wallsNumber=0x0;exits=[];exitsNumber=0x0;Tools[_0x39e9('0x2a')]();}});$(_0x39e9('0x2b'))[_0x39e9('0xf')]('click',()=>{if(isModified){dialog['showMessageBox']({'type':_0x39e9('0x22'),'buttons':[_0x39e9('0x23'),_0x39e9('0x2c'),_0x39e9('0x24')],'title':_0x39e9('0x25'),'message':_0x39e9('0x26')},_0x5a2f14=>{if(_0x5a2f14==0x0){let _0x5659b8=exportPreset();if(openedFile!=null){savePreset(_0x5659b8);}else{savePresetAs(_0x5659b8);}}if(_0x5a2f14==0x1){loadPreset();}});}else{loadPreset();}});$(_0x39e9('0x2d'))[_0x39e9('0xf')](_0x39e9('0x11'),()=>{let _0x522c53=exportPreset();if(openedFile!=null){savePreset(_0x522c53);}else{savePresetAs(_0x522c53);}});$(_0x39e9('0x2e'))[_0x39e9('0xf')](_0x39e9('0x11'),()=>{if(operationStack[_0x39e9('0x2f')]!=0x0&&currentOperation>-0x1){undo();}});$(_0x39e9('0x30'))[_0x39e9('0xf')](_0x39e9('0x11'),()=>{if(currentOperation+0x1!=operationStack[_0x39e9('0x2f')]){redo();}});$(_0x39e9('0x31'))[_0x39e9('0xf')](_0x39e9('0x11'),function(){if(!isRunning){isRunning=!![];start();$(_0x39e9('0x31'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0x34');$(_0x39e9('0x31'))[_0x39e9('0x35')]=_0x39e9('0x36');$(_0x39e9('0x37'))[_0x39e9('0x38')][_0x39e9('0x39')]('disabled');$(_0x39e9('0x37'))['childNodes'][0x1][_0x39e9('0x33')]=_0x39e9('0x3a');let _0x19a188=document[_0x39e9('0x3b')](_0x39e9('0x3c'));currentTool=_0x39e9('0x1b');for(let _0x226bc9=0x0;_0x226bc9<_0x19a188[_0x39e9('0x2f')];_0x226bc9++){_0x19a188[_0x226bc9]['classList']['remove'](_0x39e9('0x3d'));_0x19a188[_0x226bc9][_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x3f'));}let _0x1cccc1=document[_0x39e9('0x3b')](_0x39e9('0x40'));for(let _0x20de6f=0x0;_0x20de6f<_0x1cccc1[_0x39e9('0x2f')];_0x20de6f++){_0x1cccc1[_0x20de6f][_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x3f'));}$('createFileButton')[_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x3f'));$(_0x39e9('0x2b'))[_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x3f'));$(_0x39e9('0x2d'))[_0x39e9('0x38')]['add'](_0x39e9('0x3f'));$(_0x39e9('0x2e'))[_0x39e9('0x38')][_0x39e9('0x3e')]('disabled');$(_0x39e9('0x30'))[_0x39e9('0x38')]['add'](_0x39e9('0x3f'));}else{if(!isPaused){speed=0x0;isPaused=!![];$(_0x39e9('0x31'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0x41');$(_0x39e9('0x31'))['title']=_0x39e9('0x42');}else{speed=0x1;isPaused=![];$(_0x39e9('0x31'))['childNodes'][0x1][_0x39e9('0x33')]=_0x39e9('0x34');$(_0x39e9('0x31'))[_0x39e9('0x35')]=_0x39e9('0x36');}}});$(_0x39e9('0x37'))[_0x39e9('0xf')](_0x39e9('0x11'),()=>{isRunning=![];humansPlaces=[];peopleNumber=0x0;humans=[];speed=0x1;$(_0x39e9('0x31'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0x41');$(_0x39e9('0x31'))[_0x39e9('0x35')]=_0x39e9('0x42');$(_0x39e9('0x37'))[_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x3f'));$(_0x39e9('0x37'))[_0x39e9('0x32')][0x1]['src']=_0x39e9('0x43');let _0x23c967=document[_0x39e9('0x3b')]('.toolbox-item');for(let _0x2b224c=0x0;_0x2b224c<_0x23c967[_0x39e9('0x2f')];_0x2b224c++){_0x23c967[_0x2b224c][_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));}let _0x2142d6=document['querySelectorAll'](_0x39e9('0x40'));for(let _0x46d7ab=0x0;_0x46d7ab<_0x2142d6[_0x39e9('0x2f')];_0x46d7ab++){_0x2142d6[_0x46d7ab][_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));}$('createFileButton')[_0x39e9('0x38')][_0x39e9('0x39')]('disabled');$(_0x39e9('0x2b'))[_0x39e9('0x38')]['remove']('disabled');$(_0x39e9('0x2d'))[_0x39e9('0x38')]['remove'](_0x39e9('0x3f'));$(_0x39e9('0x2e'))[_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));$(_0x39e9('0x30'))['classList'][_0x39e9('0x39')](_0x39e9('0x3f'));});let _0x43172a;let _0x1c2e29=![];$(_0x39e9('0x44'))[_0x39e9('0xf')](_0x39e9('0x11'),_0x469535=>{if(!_0x1c2e29){$(_0x39e9('0x44'))[_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x3d'));_0x43172a=createMenu($('viewSettingsButton')[_0x39e9('0x45')],$(_0x39e9('0x44'))[_0x39e9('0x46')]+0x23,viewSettings);if(showVectors){$(_0x39e9('0x47'))[_0x39e9('0x48')]=!![];}if(showDirections){$('showDirections')[_0x39e9('0x48')]=!![];}$('showVectors')[_0x39e9('0xf')](_0x39e9('0x49'),()=>{showVectors=$(_0x39e9('0x47'))[_0x39e9('0x48')];});$(_0x39e9('0x4a'))[_0x39e9('0xf')]('change',()=>{showDirections=$(_0x39e9('0x4a'))[_0x39e9('0x48')];});_0x1c2e29=!![];}});let _0x8f48af=document['querySelectorAll']('.menubar-item');let _0x4a242c;let _0x19fbb1=![];let _0x31ba3a=[[{'title':_0x39e9('0x4b'),'keys':_0x39e9('0x4c'),'id':_0x39e9('0x4d')},{'title':_0x39e9('0x4e'),'keys':'Ctrl\x20+\x20O','id':_0x39e9('0x4f')},{'title':_0x39e9('0x50')},{'title':_0x39e9('0x23'),'keys':_0x39e9('0x51'),'id':_0x39e9('0x52')},{'title':_0x39e9('0x53'),'id':_0x39e9('0x54')},{'title':_0x39e9('0x50')},{'title':'Выход','id':_0x39e9('0x55')}],[{'title':_0x39e9('0x56'),'keys':_0x39e9('0x57'),'id':_0x39e9('0x58')},{'title':'Вернуть','keys':_0x39e9('0x59'),'id':_0x39e9('0x5a')},{'title':_0x39e9('0x50')},{'title':_0x39e9('0x5b'),'id':_0x39e9('0x5c')}],[{'title':'Стена','id':_0x39e9('0x5d')},{'title':_0x39e9('0x5e'),'id':'exits'},{'title':'Направление','id':_0x39e9('0x5f')},{'title':'Индивид','id':_0x39e9('0x60')},{'title':_0x39e9('0x61'),'id':_0x39e9('0x62')}],[{'title':_0x39e9('0x63'),'id':_0x39e9('0x64')},{'title':_0x39e9('0x50')},{'title':_0x39e9('0x65'),'id':_0x39e9('0x66')}]];for(let _0x33597f=0x0;_0x33597f<_0x8f48af['length'];_0x33597f++){_0x8f48af[_0x33597f]['addEventListener']('click',_0x382327=>{if(_0x4a242c!=undefined){document[_0x39e9('0x19')]['removeChild'](_0x4a242c);for(let _0x3d2593=0x0;_0x3d2593<_0x8f48af[_0x39e9('0x2f')];_0x3d2593++){_0x8f48af[_0x3d2593][_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3d'));}}_0x4a242c=showDropdownMenu(_0x382327[_0x39e9('0x9')][0x0]['id'],_0x31ba3a[_0x33597f]);_0x19fbb1=!![];});_0x8f48af[_0x33597f][_0x39e9('0xf')](_0x39e9('0x67'),_0x533e4b=>{if(_0x19fbb1){if(_0x4a242c!=undefined){document[_0x39e9('0x19')][_0x39e9('0x68')](_0x4a242c);for(let _0x3bcb5f=0x0;_0x3bcb5f<_0x8f48af[_0x39e9('0x2f')];_0x3bcb5f++){_0x8f48af[_0x3bcb5f][_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3d'));}}_0x4a242c=showDropdownMenu(_0x533e4b['path'][0x0]['id'],_0x31ba3a[_0x33597f]);_0x19fbb1=!![];}});}document[_0x39e9('0x19')][_0x39e9('0xf')](_0x39e9('0x11'),_0x147bf8=>{if(_0x19fbb1&&!_0x147bf8['path'][0x0][_0x39e9('0x38')][_0x39e9('0x69')](_0x39e9('0x6a'))){if(_0x147bf8[_0x39e9('0x9')][0x0]['classList'][_0x39e9('0x69')]('menu-item')){if(_0x147bf8[_0x39e9('0x9')][0x0]['id']=='createFile'){if(isModified){dialog[_0x39e9('0x21')]({'type':_0x39e9('0x22'),'buttons':['Сохранить',_0x39e9('0x2c'),_0x39e9('0x24')],'title':_0x39e9('0x25'),'message':'Сохранить\x20изменения\x20в\x20файле?'},_0x2a84db=>{if(_0x2a84db==0x0){let _0x255661=exportPreset();if(openedFile!=null){savePreset(_0x255661);}else{savePresetAs(_0x255661);}}if(_0x2a84db==0x1){$(_0x39e9('0x27'))['innerText']=_0x39e9('0x28');isModified=![];isRunning=![];humansPlaces=[];peopleNumber=0x0;humans=[];speed=0x1;ctx['clearRect'](0x0,0x0,WIDTH,HEIGHT);walls=[];wallsNumber=0x0;exits=[];exitsNumber=0x0;Tools['update']();}});}else{$(_0x39e9('0x27'))['innerText']=_0x39e9('0x28');isModified=![];isRunning=![];humansPlaces=[];peopleNumber=0x0;humans=[];speed=0x1;ctx[_0x39e9('0x29')](0x0,0x0,WIDTH,HEIGHT);walls=[];wallsNumber=0x0;exits=[];exitsNumber=0x0;Tools[_0x39e9('0x2a')]();}}if(_0x147bf8[_0x39e9('0x9')][0x0]['id']==_0x39e9('0x4f')){if(isModified){dialog[_0x39e9('0x21')]({'type':_0x39e9('0x22'),'buttons':[_0x39e9('0x23'),_0x39e9('0x2c'),'Отмена'],'title':_0x39e9('0x25'),'message':'Сохранить\x20изменения\x20в\x20файле?'},_0x44f201=>{if(_0x44f201==0x0){let _0x174a32=exportPreset();if(openedFile!=null){savePreset(_0x174a32);}else{savePresetAs(_0x174a32);}}if(_0x44f201==0x1){loadPreset();}});}else{loadPreset();}}if(_0x147bf8[_0x39e9('0x9')][0x0]['id']==_0x39e9('0x52')){let _0xee0794=exportPreset();if(openedFile!=null){savePreset(_0xee0794);}else{savePresetAs(_0xee0794);}}if(_0x147bf8['path'][0x0]['id']==_0x39e9('0x54')){let _0x335fc2=exportPreset();savePresetAs(_0x335fc2);}if(_0x147bf8[_0x39e9('0x9')][0x0]['id']==_0x39e9('0x55')){ipcRenderer[_0x39e9('0x12')](_0x39e9('0x13'),isModified['toString']());ipcRenderer['on'](_0x39e9('0x15'),(_0x13e58f,_0x352e66)=>{if(_0x352e66==_0x39e9('0x16')){let _0x8e367f=exportPreset();if(openedFile!=null){savePreset(_0x8e367f);}else{savePresetAs(_0x8e367f);}}});}if(_0x147bf8[_0x39e9('0x9')][0x0]['id']==_0x39e9('0x58')){if(operationStack['length']!=0x0&&currentOperation>-0x1){undo();}}if(_0x147bf8['path'][0x0]['id']==_0x39e9('0x5a')){if(currentOperation+0x1!=operationStack['length']){redo();}}if(_0x147bf8['path'][0x0]['id']==_0x39e9('0x5c')){operationStack[_0x39e9('0x6b')](currentOperation+0x1);operationStack['push']({'type':_0x39e9('0x6c'),'object':{'walls':walls,'exits':exits}});currentOperation++;ctx[_0x39e9('0x29')](0x0,0x0,WIDTH,HEIGHT);walls=[];exits=[];humans=[];wallsNumber=0x0;exitsNumber=0x0;peopleNumber=0x0;Tools[_0x39e9('0x2a')]();if(currentOperation>-0x1){$(_0x39e9('0x2e'))[_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));$(_0x39e9('0x2e'))[_0x39e9('0x32')][0x1]['src']='img/undo-active.svg';}else{$(_0x39e9('0x2e'))[_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x3f'));$(_0x39e9('0x2e'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0x6d');}}if(_0x147bf8[_0x39e9('0x9')][0x0]['id']==_0x39e9('0x5d')){currentTool='walls';}if(_0x147bf8[_0x39e9('0x9')][0x0]['id']==_0x39e9('0x6e')){currentTool='exits';}if(_0x147bf8[_0x39e9('0x9')][0x0]['id']==_0x39e9('0x5f')){currentTool=_0x39e9('0x5f');}if(_0x147bf8[_0x39e9('0x9')][0x0]['id']==_0x39e9('0x60')){currentTool='place';}if(_0x147bf8['path'][0x0]['id']=='eraser'){currentTool='eraser';}if(_0x147bf8[_0x39e9('0x9')][0x0]['id']=='about'){alert(_0x39e9('0x6f'));}}document[_0x39e9('0x19')][_0x39e9('0x68')](_0x4a242c);for(let _0x1cdc9a=0x0;_0x1cdc9a<_0x8f48af[_0x39e9('0x2f')];_0x1cdc9a++){_0x8f48af[_0x1cdc9a][_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3d'));}_0x19fbb1=![];_0x4a242c=undefined;}if(_0x1c2e29&&!(_0x147bf8[_0x39e9('0x9')][0x0]['id']==_0x39e9('0x44')||_0x147bf8[_0x39e9('0x9')][0x1]['id']==_0x39e9('0x44')||(_0x147bf8[_0x39e9('0x9')][0x0][_0x39e9('0x38')][_0x39e9('0x69')](_0x39e9('0x70'))||_0x147bf8[_0x39e9('0x9')][0x1]['classList'][_0x39e9('0x69')]('item')||_0x147bf8[_0x39e9('0x9')][0x2]['classList']['contains'](_0x39e9('0x70'))))){document[_0x39e9('0x19')][_0x39e9('0x68')](_0x43172a);$(_0x39e9('0x44'))[_0x39e9('0x38')]['remove'](_0x39e9('0x3d'));_0x1c2e29=![];}});ctx=$(canvas)[_0x39e9('0x71')]('2d');Tools[_0x39e9('0x2a')]();createToolbox();};function start(){isRunning=!![];for(let _0x48b3fc=0x0;_0x48b3fc<peopleNumber;_0x48b3fc++){var _0x64dedb=new Human();_0x64dedb['place'](humansPlaces[_0x48b3fc]['x'],humansPlaces[_0x48b3fc]['y']);humans[_0x48b3fc]=_0x64dedb;}function _0x5afb75(){ctx[_0x39e9('0x29')](0x0,0x0,WIDTH,HEIGHT);Tools['drawGrid'](step);Tools['drawWalls']();Tools[_0x39e9('0x72')]();if(isRunning){if(showDirections){Tools[_0x39e9('0x73')]();}}else{Tools[_0x39e9('0x73')]();}for(let _0x48b3fc=0x0;_0x48b3fc<humans[_0x39e9('0x2f')];_0x48b3fc++){humans[_0x48b3fc][_0x39e9('0x74')]();humans[_0x48b3fc]['setVelocity']();humans[_0x48b3fc][_0x39e9('0x75')](humans);humans[_0x48b3fc]['setWallsDistances'](walls);humans[_0x48b3fc][_0x39e9('0x76')](humans);humans[_0x48b3fc][_0x39e9('0x77')](humans);humans[_0x48b3fc][_0x39e9('0x78')](walls);humans[_0x48b3fc][_0x39e9('0x79')](walls);humans[_0x48b3fc][_0x39e9('0x7a')](humans);humans[_0x48b3fc]['acceleration']();humans[_0x48b3fc][_0x39e9('0x7b')]();}if(isRunning){window[_0x39e9('0x7c')](_0x5afb75);}}_0x5afb75();}var Tools={'drawGrid':function(_0x51cb2c){ctx[_0x39e9('0x7d')]='#ddd';ctx[_0x39e9('0x7e')]=0x1;ctx[_0x39e9('0x7f')]();for(let _0x3d3761=_0x51cb2c+0.5;_0x3d3761<WIDTH;_0x3d3761+=_0x51cb2c){ctx['moveTo'](_0x3d3761,0x0);ctx[_0x39e9('0x80')](_0x3d3761,HEIGHT);ctx[_0x39e9('0x81')]();}for(let _0x574515=_0x51cb2c+0.5;_0x574515<HEIGHT;_0x574515+=_0x51cb2c){ctx[_0x39e9('0x82')](0x0,_0x574515);ctx['lineTo'](WIDTH,_0x574515);ctx[_0x39e9('0x81')]();}ctx['closePath']();},'drawWalls':function(){walls=condense(walls);ctx['strokeStyle']=_0x39e9('0x83');ctx['lineWidth']=0x4;ctx['beginPath']();for(let _0x2443a6=0x0;_0x2443a6<walls[_0x39e9('0x2f')];_0x2443a6++){ctx[_0x39e9('0x82')](walls[_0x2443a6]['x1'],walls[_0x2443a6]['y1']);ctx[_0x39e9('0x80')](walls[_0x2443a6]['x2'],walls[_0x2443a6]['y2']);}ctx[_0x39e9('0x81')]();ctx['closePath']();},'drawExits':function(){exits=condense(exits);ctx['strokeStyle']=_0x39e9('0x84');ctx['lineWidth']=0x2;ctx[_0x39e9('0x7f')]();for(let _0x1b5ccb=0x0;_0x1b5ccb<exits[_0x39e9('0x2f')];_0x1b5ccb++){ctx[_0x39e9('0x82')](exits[_0x1b5ccb]['x1'],exits[_0x1b5ccb]['y1']);ctx[_0x39e9('0x80')](exits[_0x1b5ccb]['x2'],exits[_0x1b5ccb]['y2']);if(exits[_0x1b5ccb]['dx']==0x0){ctx[_0x39e9('0x82')](exits[_0x1b5ccb]['x1']-0x6,exits[_0x1b5ccb]['y1']);ctx[_0x39e9('0x80')](exits[_0x1b5ccb]['x1']+0x6,exits[_0x1b5ccb]['y1']);ctx[_0x39e9('0x82')](exits[_0x1b5ccb]['x2']-0x6,exits[_0x1b5ccb]['y2']);ctx[_0x39e9('0x80')](exits[_0x1b5ccb]['x2']+0x6,exits[_0x1b5ccb]['y2']);}if(exits[_0x1b5ccb]['dy']==0x0){ctx['moveTo'](exits[_0x1b5ccb]['x1'],exits[_0x1b5ccb]['y1']-0x6);ctx[_0x39e9('0x80')](exits[_0x1b5ccb]['x1'],exits[_0x1b5ccb]['y1']+0x6);ctx[_0x39e9('0x82')](exits[_0x1b5ccb]['x2'],exits[_0x1b5ccb]['y2']-0x6);ctx[_0x39e9('0x80')](exits[_0x1b5ccb]['x2'],exits[_0x1b5ccb]['y2']+0x6);}}ctx[_0x39e9('0x81')]();ctx[_0x39e9('0x85')]();},'drawDirections':function(){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x86')]=_0x39e9('0x87');ctx[_0x39e9('0x7d')]=_0x39e9('0x84');ctx[_0x39e9('0x7e')]=0x2;for(let _0x1dcbe9=0x0;_0x1dcbe9<exits['length'];_0x1dcbe9++){if(exits[_0x1dcbe9][_0x39e9('0x88')]!=undefined){ctx[_0x39e9('0x82')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2+0xe,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2);ctx[_0x39e9('0x89')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2,0xe,0x0,0x2*Math['PI'],![]);if(exits[_0x1dcbe9][_0x39e9('0x88')]=='left'){ctx[_0x39e9('0x82')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2+0x4,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2-0x7);ctx[_0x39e9('0x80')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2-0x6,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2);ctx[_0x39e9('0x82')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2-0x6,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2);ctx['lineTo']((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2+0x4,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2+0x7);}if(exits[_0x1dcbe9]['direction']=='up'){ctx[_0x39e9('0x82')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2-0x7,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2+0x4);ctx[_0x39e9('0x80')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2-0x6);ctx['moveTo']((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2-0x6);ctx['lineTo']((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2+0x7,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2+0x4);}if(exits[_0x1dcbe9][_0x39e9('0x88')]=='right'){ctx[_0x39e9('0x82')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2-0x4,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2-0x7);ctx['lineTo']((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2+0x6,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2);ctx[_0x39e9('0x82')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2+0x6,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2);ctx[_0x39e9('0x80')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2-0x4,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2+0x7);}if(exits[_0x1dcbe9][_0x39e9('0x88')]==_0x39e9('0x8a')){ctx[_0x39e9('0x82')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2-0x7,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2-0x4);ctx[_0x39e9('0x80')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2+0x6);ctx[_0x39e9('0x82')]((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2+0x6);ctx['lineTo']((exits[_0x1dcbe9]['x1']+exits[_0x1dcbe9]['x2'])/0x2+0x7,(exits[_0x1dcbe9]['y1']+exits[_0x1dcbe9]['y2'])/0x2-0x4);}}}ctx['fill']();ctx[_0x39e9('0x81')]();ctx[_0x39e9('0x85')]();},'drawHumans'(_0x43d569){for(let _0x339891=0x0;_0x339891<humansPlaces[_0x39e9('0x2f')];_0x339891++){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x86')]='#1e824c';ctx['arc'](humansPlaces[_0x339891]['x'],humansPlaces[_0x339891]['y'],0xa,0x0,0x2*Math['PI'],![]);ctx[_0x39e9('0x8b')]();ctx[_0x39e9('0x85')]();}},'update'(){ctx[_0x39e9('0x29')](0x0,0x0,WIDTH,HEIGHT);this[_0x39e9('0x8c')](step);this[_0x39e9('0x8d')]();this[_0x39e9('0x72')]();this[_0x39e9('0x73')]();this[_0x39e9('0x8e')]();}};var Vector={'sum':function(_0x5bc669){let _0x1aca05={'dx':0x0,'dy':0x0};for(let _0x45829b=0x0;_0x45829b<_0x5bc669[_0x39e9('0x2f')];_0x45829b++){_0x1aca05['dx']+=_0x5bc669[_0x45829b]['dx'];_0x1aca05['dy']+=_0x5bc669[_0x45829b]['dy'];}return _0x1aca05;},'scalar':function(_0x50c8d3,_0x1f47ee){let _0x4bd0c3=_0x50c8d3;let _0x4b3632=_0x1f47ee;let _0x5b98b1=_0x4bd0c3['dx']*_0x4b3632['dx']+_0x4bd0c3['dy']*_0x4b3632['dy'];return _0x5b98b1;},'crossing':function(_0x2a9526,_0xb354de){let _0x598f83=_0x2a9526['x1'];let _0x44b12f=_0x2a9526['x2'];let _0x1cb877=_0x2a9526['y1'];let _0x280598=_0x2a9526['y2'];let _0x3f227e=_0xb354de['x1'];let _0x2bc41f=_0xb354de['x2'];let _0xbfe282=_0xb354de['y1'];let _0x43c2d9=_0xb354de['y2'];let _0x434c69={'x':0x0,'y':0x0};let _0x106ae2=((_0x2bc41f-_0x3f227e)*(_0x1cb877-_0xbfe282)-(_0x43c2d9-_0xbfe282)*(_0x598f83-_0x3f227e))/((_0x43c2d9-_0xbfe282)*(_0x44b12f-_0x598f83)-(_0x2bc41f-_0x3f227e)*(_0x280598-_0x1cb877));let _0x4b1d42=((_0x44b12f-_0x598f83)*(_0x1cb877-_0xbfe282)-(_0x280598-_0x1cb877)*(_0x598f83-_0x3f227e))/((_0x43c2d9-_0xbfe282)*(_0x44b12f-_0x598f83)-(_0x2bc41f-_0x3f227e)*(_0x280598-_0x1cb877));_0x434c69={'x':_0x598f83+_0x106ae2*(_0x44b12f-_0x598f83),'y':_0x1cb877+_0x106ae2*(_0x280598-_0x1cb877)};return _0x434c69;}};function Heaviside(_0x30e431){if(_0x30e431<0x0)return 0x0;if(_0x30e431>=0x0)return 0x1;}function randomInt(_0x1597a3,_0x4c2675){var _0x4edc2b=_0x1597a3-0.5+Math[_0x39e9('0x8f')]()*(_0x4c2675-_0x1597a3+0x1);_0x4edc2b=Math[_0x39e9('0x90')](_0x4edc2b);return _0x4edc2b;}function addMouseWheelIncrement(){let _0x164b7e=document[_0x39e9('0x3b')](_0x39e9('0x91'));for(let _0x4a141a=0x0;_0x4a141a<_0x164b7e['length'];_0x4a141a++){_0x164b7e[_0x4a141a]['addEventListener'](_0x39e9('0x92'),function(_0x38a218){let _0x43fd46=_0x38a218['deltaY'];let _0x2bfe05=parseFloat(_0x164b7e[_0x4a141a][_0x39e9('0x93')]['increment']);if(_0x43fd46<0x0){_0x164b7e[_0x4a141a][_0x39e9('0x94')]=parseFloat(parseFloat(_0x164b7e[_0x4a141a][_0x39e9('0x94')])+_0x2bfe05)[_0x39e9('0x95')](0x2);}else if(_0x43fd46>0x0){_0x164b7e[_0x4a141a][_0x39e9('0x94')]=parseFloat(parseFloat(_0x164b7e[_0x4a141a]['value'])-_0x2bfe05)[_0x39e9('0x95')](0x2);}});}}function createPopup(_0x30317d,_0x3f0bc0){newPopup=document[_0x39e9('0x96')](_0x39e9('0x97'));newPopup[_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x98'));newPopup[_0x39e9('0x99')]='<div\x20class=\x22item\x22><label>Направление\x20движения</label><div\x20class=\x22row\x20row-4\x22><div\x20class=\x22direction-button\x22\x20id=\x22left\x22>&#x1F868;</div><div\x20class=\x22direction-button\x22\x20id=\x22up\x22>&#x1F869;</div><div\x20class=\x22direction-button\x22\x20id=\x22right\x22>&#x1F86A;</div><div\x20class=\x22direction-button\x22\x20id=\x22down\x22>&#x1F86B;</div></div><div>';newPopup[_0x39e9('0x9a')][_0x39e9('0x9b')]=_0x30317d+'px';newPopup[_0x39e9('0x9a')]['top']=_0x3f0bc0+'px';document[_0x39e9('0x19')][_0x39e9('0x9c')](newPopup);return newPopup;}function createMenu(_0x32320b,_0x640b09,_0x2fdd41){let _0x1a6063=document['createElement'](_0x39e9('0x97'));_0x1a6063[_0x39e9('0x38')]['add'](_0x39e9('0x9d'));_0x1a6063[_0x39e9('0x99')]=_0x2fdd41;_0x1a6063[_0x39e9('0x9a')]['left']=_0x32320b+'px';_0x1a6063[_0x39e9('0x9a')][_0x39e9('0x9e')]=_0x640b09+'px';document[_0x39e9('0x19')][_0x39e9('0x9c')](_0x1a6063);return _0x1a6063;}function showDropdownMenu(_0x3ec472,_0x2eba31){let _0x1ccc04=document[_0x39e9('0x96')](_0x39e9('0x97'));_0x1ccc04[_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x9f'));_0x1ccc04[_0x39e9('0x9a')]['top']=$(_0x3ec472)[_0x39e9('0x46')]+0x23+'px';_0x1ccc04['style']['left']=$(_0x3ec472)['offsetLeft']+'px';let _0x52a155=_0x39e9('0xa0');for(let _0x52d97c=0x0;_0x52d97c<_0x2eba31[_0x39e9('0x2f')];_0x52d97c++){if(_0x2eba31[_0x52d97c][_0x39e9('0x35')]!=_0x39e9('0x50')){let _0x2d5985='';if(_0x2eba31[_0x52d97c]['id']==_0x39e9('0x58')){if(currentOperation==-0x1){_0x2d5985='disabled';}}if(_0x2eba31[_0x52d97c]['id']==_0x39e9('0x5a')){if(currentOperation+0x1==operationStack[_0x39e9('0x2f')]){_0x2d5985='disabled';}}let _0x5b47c9=_0x2eba31[_0x52d97c][_0x39e9('0xa1')]==undefined?'&emsp;&emsp;&emsp;&emsp;&emsp;':_0x2eba31[_0x52d97c][_0x39e9('0xa1')];_0x52a155+=_0x39e9('0xa2')+_0x2d5985+_0x39e9('0xa3')+_0x2eba31[_0x52d97c]['id']+'\x22>'+_0x2eba31[_0x52d97c][_0x39e9('0x35')]+_0x39e9('0xa4')+_0x5b47c9+_0x39e9('0xa5');}else{_0x52a155+=_0x39e9('0xa6');}}_0x52a155+=_0x39e9('0xa7');_0x1ccc04[_0x39e9('0x99')]=_0x52a155;document[_0x39e9('0x19')][_0x39e9('0x9c')](_0x1ccc04);$(_0x3ec472)[_0x39e9('0x38')][_0x39e9('0x3e')]('active');return _0x1ccc04;}function condense(_0x53e726){let _0x499b9d=[];for(let _0x4ed62d=0x0;_0x4ed62d<_0x53e726['length'];_0x4ed62d++){if(_0x53e726[_0x4ed62d]!=null){_0x499b9d[_0x39e9('0xa8')](_0x53e726[_0x4ed62d]);}}return _0x499b9d;}function savePreset(_0x3dc09e){$(_0x39e9('0xa9'))[_0x39e9('0xaa')]='Сохранение...';fs[_0x39e9('0xab')](openedFile,_0x3dc09e,_0x245bca=>{if(_0x245bca){console[_0x39e9('0xac')](_0x245bca['message']);}isModified=![];$(_0x39e9('0xa9'))['innerText']='Файл\x20сохранен';window['setTimeout'](()=>{$(_0x39e9('0xa9'))[_0x39e9('0xaa')]='';},0xbb8);});}function savePresetAs(_0x2313eb){dialog[_0x39e9('0xad')]({'title':_0x39e9('0x53'),'defaultPath':_0x39e9('0xae'),'filters':[{'name':_0x39e9('0xaf'),'extensions':[_0x39e9('0xb0')]}]},_0x4ecbce=>{if(_0x4ecbce[_0x39e9('0xb1')](_0x39e9('0xb2'))==-0x1)_0x4ecbce+=_0x39e9('0xb2');$('status')[_0x39e9('0xaa')]=_0x39e9('0xb3');fs[_0x39e9('0xab')](_0x4ecbce,_0x2313eb,function(_0x51479c){if(_0x51479c){console[_0x39e9('0xac')](_0x51479c[_0x39e9('0xb4')]);}isModified=![];});openedFile=_0x4ecbce;$('info')[_0x39e9('0xaa')]=openedFile;$(_0x39e9('0xa9'))['innerText']=_0x39e9('0xb5');window['setTimeout'](()=>{$(_0x39e9('0xa9'))[_0x39e9('0xaa')]='';},0xbb8);});}function loadPreset(){$(_0x39e9('0xa9'))['innerText']='';let _0xb3ec4c=dialog[_0x39e9('0xb6')]({'title':_0x39e9('0x4e'),'filters':[{'name':'XML','extensions':[_0x39e9('0xb0')]}],'properties':[_0x39e9('0x4f')]});let _0xde3d1e;fs['readFile'](_0xb3ec4c[_0x39e9('0x14')](),_0x39e9('0xb7'),(_0x294aae,_0x4f55a1)=>{_0xde3d1e=_0x4f55a1;parseXML(_0xde3d1e,(_0x294aae,_0x5d2726)=>{if(_0x5d2726[_0x39e9('0xb8')][_0x39e9('0x5d')]!=undefined){for(let _0x3ae1b4=0x0;_0x3ae1b4<_0x5d2726[_0x39e9('0xb8')][_0x39e9('0x5d')][_0x39e9('0x2f')];_0x3ae1b4++){walls[_0x3ae1b4]={};for(let _0x1495e3 in _0x5d2726[_0x39e9('0xb8')]['walls'][_0x3ae1b4]){let _0x390473=parseInt(_0x5d2726[_0x39e9('0xb8')][_0x39e9('0x5d')][_0x3ae1b4][_0x1495e3][0x0]);walls[_0x3ae1b4][_0x1495e3]=_0x390473;}wallsNumber++;}}wallsNumber+=0x1;if(_0x5d2726[_0x39e9('0xb8')][_0x39e9('0x6e')]!=undefined){for(let _0x36598f=0x0;_0x36598f<_0x5d2726[_0x39e9('0xb8')][_0x39e9('0x6e')][_0x39e9('0x2f')];_0x36598f++){exits[_0x36598f]={};for(let _0x1495e3 in _0x5d2726[_0x39e9('0xb8')][_0x39e9('0x6e')][_0x36598f]){let _0x390473=isNaN(parseInt(_0x5d2726[_0x39e9('0xb8')][_0x39e9('0x6e')][_0x36598f][_0x1495e3][0x0]))?_0x5d2726[_0x39e9('0xb8')][_0x39e9('0x6e')][_0x36598f][_0x1495e3][0x0]:parseInt(_0x5d2726[_0x39e9('0xb8')][_0x39e9('0x6e')][_0x36598f][_0x1495e3][0x0]);exits[_0x36598f][_0x1495e3]=_0x390473;}exitsNumber++;}}exitsNumber+=0x1;});Tools[_0x39e9('0x2a')]();openedFile=_0xb3ec4c[_0x39e9('0x14')]();$(_0x39e9('0x27'))[_0x39e9('0xaa')]=openedFile;});}function erase(){$('canvas')[_0x39e9('0xf')](_0x39e9('0xb9'),function(_0x23c089){if(currentTool==_0x39e9('0x62')){Tools[_0x39e9('0x2a')]();for(let _0x204f8b=0x0;_0x204f8b<walls[_0x39e9('0x2f')];_0x204f8b++){if(_0x23c089[_0x39e9('0xba')]>=walls[_0x204f8b]['x1']-0x2&&_0x23c089[_0x39e9('0xba')]<=walls[_0x204f8b]['x2']+0x2&&_0x23c089[_0x39e9('0xbb')]>=walls[_0x204f8b]['y1']-0x2&&_0x23c089[_0x39e9('0xbb')]<=walls[_0x204f8b]['y2']+0x2){$('canvas')[_0x39e9('0x9a')][_0x39e9('0xbc')]=_0x39e9('0xbd');highlightWall(walls[_0x204f8b],_0x39e9('0xbe'));}}for(let _0x428605=0x0;_0x428605<exits['length'];_0x428605++){if(_0x23c089[_0x39e9('0xba')]>=exits[_0x428605]['x1']-0x2&&_0x23c089[_0x39e9('0xba')]<=exits[_0x428605]['x2']+0x2&&_0x23c089[_0x39e9('0xbb')]>=exits[_0x428605]['y1']-0x2&&_0x23c089['offsetY']<=exits[_0x428605]['y2']+0x2){$(_0x39e9('0xa'))[_0x39e9('0x9a')][_0x39e9('0xbc')]=_0x39e9('0xbd');highlightExit(exits[_0x428605],_0x39e9('0xbe'));}}}});$('canvas')[_0x39e9('0xf')]('click',function(_0x37a638){if(currentTool=='eraser'){isModified=!![];$(_0x39e9('0xa9'))['innerText']=_0x39e9('0xbf');for(let _0x57a10e=0x0;_0x57a10e<walls[_0x39e9('0x2f')];_0x57a10e++){if(_0x37a638[_0x39e9('0xba')]>=walls[_0x57a10e]['x1']-0x2&&_0x37a638[_0x39e9('0xba')]<=walls[_0x57a10e]['x2']+0x2&&_0x37a638[_0x39e9('0xbb')]>=walls[_0x57a10e]['y1']-0x2&&_0x37a638['offsetY']<=walls[_0x57a10e]['y2']+0x2){$(_0x39e9('0xa'))[_0x39e9('0x9a')][_0x39e9('0xbc')]=_0x39e9('0xbd');highlightWall(walls[_0x57a10e],'#f62459');operationStack[_0x39e9('0x6b')](currentOperation+0x1);operationStack[_0x39e9('0xa8')]({'type':_0x39e9('0xc0'),'object':walls[_0x57a10e]});currentOperation++;walls['splice'](_0x57a10e,0x1);wallsNumber=walls[_0x39e9('0x2f')];if(currentOperation>-0x1){$(_0x39e9('0x2e'))['classList'][_0x39e9('0x39')](_0x39e9('0x3f'));$('undoButton')[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0xc1');}else{$(_0x39e9('0x2e'))['classList']['remove']('disabled');$('undoButton')['childNodes'][0x1][_0x39e9('0x33')]=_0x39e9('0xc1');}if(currentOperation+0x1<operationStack['length']){$('redoButton')[_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));$(_0x39e9('0x30'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]='img/redo-active.svg';}else{$(_0x39e9('0x30'))[_0x39e9('0x38')]['add']('disabled');$(_0x39e9('0x30'))['childNodes'][0x1][_0x39e9('0x33')]='img/redo-inactive.svg';}Tools[_0x39e9('0x2a')]();}}for(let _0x29b627=0x0;_0x29b627<exits['length'];_0x29b627++){if(_0x37a638[_0x39e9('0xba')]>=exits[_0x29b627]['x1']-0x2&&_0x37a638[_0x39e9('0xba')]<=exits[_0x29b627]['x2']+0x2&&_0x37a638[_0x39e9('0xbb')]>=exits[_0x29b627]['y1']-0x2&&_0x37a638[_0x39e9('0xbb')]<=exits[_0x29b627]['y2']+0x2){$(_0x39e9('0xa'))[_0x39e9('0x9a')][_0x39e9('0xbc')]=_0x39e9('0xbd');highlightExit(exits[_0x29b627],_0x39e9('0xbe'));operationStack[_0x39e9('0x6b')](currentOperation+0x1);operationStack[_0x39e9('0xa8')]({'type':_0x39e9('0xc2'),'object':exits[_0x29b627]});currentOperation++;exits[_0x39e9('0x6b')](_0x29b627,0x1);exitsNumber=exits[_0x39e9('0x2f')];if(currentOperation>-0x1){$(_0x39e9('0x2e'))[_0x39e9('0x38')][_0x39e9('0x39')]('disabled');$(_0x39e9('0x2e'))['childNodes'][0x1][_0x39e9('0x33')]='img/undo-active.svg';}else{$(_0x39e9('0x2e'))[_0x39e9('0x38')]['remove'](_0x39e9('0x3f'));$('undoButton')[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0xc1');}if(currentOperation+0x1!=operationStack[_0x39e9('0x2f')]){$(_0x39e9('0x30'))[_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));$(_0x39e9('0x30'))[_0x39e9('0x32')][0x1]['src']='img/redo-active.svg';}else{$('redoButton')[_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x3f'));$(_0x39e9('0x30'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]='img/redo-inactive.svg';}Tools[_0x39e9('0x2a')]();}}}});}function exportPreset(){let _0x3ab2b5=require(_0x39e9('0x7'));let _0x56bace;let _0x4dc587=new _0x3ab2b5[(_0x39e9('0xc3'))]({'rootName':_0x39e9('0xb8'),'headless':!![]});_0x56bace=_0x4dc587[_0x39e9('0xc4')]({'walls':walls,'exits':exits});return _0x56bace;}function highlightExit(_0xcc71c,_0x2efd48){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x7d')]=_0x2efd48;ctx[_0x39e9('0x7e')]=0x2;ctx['moveTo'](_0xcc71c['x1'],_0xcc71c['y1']);ctx[_0x39e9('0x80')](_0xcc71c['x2'],_0xcc71c['y2']);if(_0xcc71c['dx']==0x0){ctx[_0x39e9('0x82')](_0xcc71c['x1']-0x6,_0xcc71c['y1']);ctx['lineTo'](_0xcc71c['x1']+0x6,_0xcc71c['y1']);ctx[_0x39e9('0x82')](_0xcc71c['x2']-0x6,_0xcc71c['y2']);ctx['lineTo'](_0xcc71c['x2']+0x6,_0xcc71c['y2']);}if(_0xcc71c['dy']==0x0){ctx[_0x39e9('0x82')](_0xcc71c['x1'],_0xcc71c['y1']-0x6);ctx['lineTo'](_0xcc71c['x1'],_0xcc71c['y1']+0x6);ctx['moveTo'](_0xcc71c['x2'],_0xcc71c['y2']-0x6);ctx[_0x39e9('0x80')](_0xcc71c['x2'],_0xcc71c['y2']+0x6);}ctx[_0x39e9('0x81')]();ctx[_0x39e9('0x85')]();ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x86')]=_0x39e9('0x87');ctx[_0x39e9('0x7d')]=_0x2efd48;ctx[_0x39e9('0x7e')]=0x2;if(_0xcc71c[_0x39e9('0x88')]!=undefined){ctx[_0x39e9('0x89')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2,0xe,0x0,0x2*Math['PI'],![]);if(_0xcc71c[_0x39e9('0x88')]==_0x39e9('0x9b')){ctx['moveTo']((_0xcc71c['x1']+_0xcc71c['x2'])/0x2+0x4,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2-0x7);ctx[_0x39e9('0x80')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2-0x6,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2);ctx[_0x39e9('0x82')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2-0x6,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2);ctx['lineTo']((_0xcc71c['x1']+_0xcc71c['x2'])/0x2+0x4,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2+0x7);}if(_0xcc71c['direction']=='up'){ctx[_0x39e9('0x82')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2-0x7,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2+0x4);ctx['lineTo']((_0xcc71c['x1']+_0xcc71c['x2'])/0x2,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2-0x6);ctx[_0x39e9('0x82')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2-0x6);ctx[_0x39e9('0x80')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2+0x7,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2+0x4);}if(_0xcc71c[_0x39e9('0x88')]==_0x39e9('0xc5')){ctx[_0x39e9('0x82')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2-0x4,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2-0x7);ctx[_0x39e9('0x80')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2+0x6,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2);ctx[_0x39e9('0x82')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2+0x6,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2);ctx[_0x39e9('0x80')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2-0x4,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2+0x7);}if(_0xcc71c[_0x39e9('0x88')]==_0x39e9('0x8a')){ctx[_0x39e9('0x82')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2-0x7,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2-0x4);ctx[_0x39e9('0x80')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2+0x6);ctx[_0x39e9('0x82')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2+0x6);ctx[_0x39e9('0x80')]((_0xcc71c['x1']+_0xcc71c['x2'])/0x2+0x7,(_0xcc71c['y1']+_0xcc71c['y2'])/0x2-0x4);}}ctx[_0x39e9('0x8b')]();ctx[_0x39e9('0x81')]();ctx[_0x39e9('0x85')]();}function highlightWall(_0x463de5,_0x1b5378){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x7d')]=_0x1b5378;ctx['lineWidth']=0x4;ctx[_0x39e9('0x82')](_0x463de5['x1'],_0x463de5['y1']);ctx[_0x39e9('0x80')](_0x463de5['x2'],_0x463de5['y2']);ctx['stroke']();ctx[_0x39e9('0x85')]();}class Human{[_0x39e9('0x60')](_0x352cff,_0x1a8f2e){ctx['beginPath']();ctx[_0x39e9('0x86')]='#1e824c';ctx[_0x39e9('0x89')](_0x352cff,_0x1a8f2e,0xa,0x0,0x2*Math['PI'],![]);ctx[_0x39e9('0x8b')]();ctx[_0x39e9('0x85')]();this['x']=_0x352cff;this['y']=_0x1a8f2e;this[_0x39e9('0x88')]={'x':0x0,'y':0x0};}['setDirection'](){let _0x36b04e=[];for(let _0x6fa225=0x0;_0x6fa225<exits[_0x39e9('0x2f')];_0x6fa225++){if(exits[_0x6fa225]['dx']==0x0){let _0x1141fe=exits[_0x6fa225]['x1']-this['x'];let _0x305404=randomInt(exits[_0x6fa225]['y1']+0xf,exits[_0x6fa225]['y2']-0xf)-this['y'];let _0x2e0424=Math[_0x39e9('0xc6')](Math[_0x39e9('0xc7')](_0x1141fe,0x2)+Math['pow'](_0x305404,0x2));let _0x4ae74d=Math['atan2'](_0x305404,_0x1141fe);let _0x493225=!![];for(let _0x5c65a3=0x0;_0x5c65a3<walls['length'];_0x5c65a3++){let _0x2cadd9=Vector['crossing']({'x1':this['x'],'y1':this['y'],'x2':this['x']+_0x1141fe,'y2':this['y']+_0x305404},walls[_0x5c65a3]);if((_0x2cadd9['x']>=this['x']&&_0x2cadd9['x']<=exits[_0x6fa225]['x1']||_0x2cadd9['x']<=this['x']&&_0x2cadd9['x']>=exits[_0x6fa225]['x1'])&&_0x2cadd9['x']>=walls[_0x5c65a3]['x1']-0x1&&_0x2cadd9['x']<=walls[_0x5c65a3]['x2']+0x1&&_0x2cadd9['y']>=walls[_0x5c65a3]['y1']-0x1&&_0x2cadd9['y']<=walls[_0x5c65a3]['y2']+0x1){_0x493225=![];break;}}if(_0x493225){if(this['y']>=exits[_0x6fa225]['y1']+0xf&&this['y']<=exits[_0x6fa225]['y2']-0xf){let _0x32cc36=this['y']-0x14<exits[_0x6fa225]['y1']+0xf?exits[_0x6fa225]['y1']:this['y']-0x14;let _0x3dabaf=this['y']+0x14>exits[_0x6fa225]['y2']-0xf?exits[_0x6fa225]['y2']:this['y']+0x14;let _0x433f6e;if(Math[_0x39e9('0xc8')](_0x1141fe)>0x14){_0x433f6e=randomInt(_0x32cc36,_0x3dabaf);}else{_0x433f6e=this['y'];}_0x36b04e[_0x6fa225]={'dx':exits[_0x6fa225]['x1']-this['x'],'dy':_0x433f6e-this['y'],'module':Math[_0x39e9('0xc8')](exits[_0x6fa225]['x1']-this['x']),'angle':Math['atan2'](0x0,exits[_0x6fa225]['x1']-this['x'])};}else{_0x36b04e[_0x6fa225]={'dx':_0x1141fe,'dy':_0x305404,'module':_0x2e0424,'angle':_0x4ae74d};}}else{_0x36b04e[_0x6fa225]={'dx':0x1,'dy':0x0,'module':0x14f46b0400,'angle':0x0};}}if(exits[_0x6fa225]['dy']==0x0){let _0x1efdc5=randomInt(exits[_0x6fa225]['x1']+0xf,exits[_0x6fa225]['x2']-0xf)-this['x'];let _0x305404=exits[_0x6fa225]['y1']-this['y'];let _0x2e0424=Math[_0x39e9('0xc6')](Math[_0x39e9('0xc7')](_0x1efdc5,0x2)+Math['pow'](_0x305404,0x2));let _0x4ae74d=Math[_0x39e9('0xc9')](_0x305404,_0x1efdc5);let _0x493225=!![];for(let _0x5c65a3=0x0;_0x5c65a3<walls[_0x39e9('0x2f')];_0x5c65a3++){let _0x2cadd9=Vector[_0x39e9('0xca')]({'x1':this['x'],'y1':this['y'],'x2':this['x']+_0x1efdc5,'y2':this['y']+_0x305404},walls[_0x5c65a3]);if((_0x2cadd9['y']>=this['y']&&_0x2cadd9['y']<=exits[_0x6fa225]['y1']||_0x2cadd9['y']<=this['y']&&_0x2cadd9['y']>=exits[_0x6fa225]['y1'])&&_0x2cadd9['x']>=walls[_0x5c65a3]['x1']-0x1&&_0x2cadd9['x']<=walls[_0x5c65a3]['x2']+0x1&&_0x2cadd9['y']>=walls[_0x5c65a3]['y1']-0x1&&_0x2cadd9['y']<=walls[_0x5c65a3]['y2']+0x1){_0x493225=![];break;}}if(_0x493225){if(this['x']>=exits[_0x6fa225]['x1']+0xf&&this['x']<=exits[_0x6fa225]['x2']-0xf){let _0x384c64=this['x']-0x14<exits[_0x6fa225]['x1']+0xf?exits[_0x6fa225]['x1']:this['x']-0x14;let _0x5ab091=this['x']+0x14>exits[_0x6fa225]['x2']-0xf?exits[_0x6fa225]['x2']:this['x']+0x14;let _0x3131b4;if(Math['abs'](_0x305404)>0x14){_0x3131b4=randomInt(_0x384c64,_0x5ab091);}else{_0x3131b4=this['x'];}_0x36b04e[_0x6fa225]={'dx':_0x3131b4-this['x'],'dy':exits[_0x6fa225]['y1']-this['y'],'module':Math[_0x39e9('0xc8')](exits[_0x6fa225]['y1']-this['y']),'angle':Math[_0x39e9('0xc9')](exits[_0x6fa225]['y1']-this['y'],0x0)};}else{_0x36b04e[_0x6fa225]={'dx':_0x1efdc5,'dy':_0x305404,'module':_0x2e0424,'angle':_0x4ae74d};}}else{_0x36b04e[_0x6fa225]={'dx':0x1,'dy':0x0,'module':0x14f46b0400,'angle':0x0};}}}this[_0x39e9('0x88')]={'dx':null,'dy':null,'module':Math[_0x39e9('0xc6')](WIDTH*WIDTH+HEIGHT*HEIGHT),'angle':null};for(let _0xc1dfc2=0x0;_0xc1dfc2<_0x36b04e[_0x39e9('0x2f')];_0xc1dfc2++){if(Math[_0x39e9('0xc8')](_0x36b04e[_0xc1dfc2][_0x39e9('0xcb')])<Math['abs'](this[_0x39e9('0x88')]['module'])){if(exits[_0xc1dfc2]['dx']==0x0){if(exits[_0xc1dfc2][_0x39e9('0x88')]=='left'){if(this['x']>exits[_0xc1dfc2]['x1']){this[_0x39e9('0x88')]=_0x36b04e[_0xc1dfc2];}else{let _0xc909ed=WIDTH;for(let _0x5c65a3=0x0;_0x5c65a3<walls[_0x39e9('0x2f')];_0x5c65a3++){if(walls[_0x5c65a3]['x1']<_0xc909ed)_0xc909ed=walls[_0x5c65a3]['x1'];}for(let _0x5c65a3=0x0;_0x5c65a3<exits[_0x39e9('0x2f')];_0x5c65a3++){if(exits[_0x5c65a3]['x1']<_0xc909ed)_0xc909ed=exits[_0x5c65a3]['x1'];}if(this['x']<=_0xc909ed+0xf){this[_0x39e9('0x88')]['dx']=-0x1;this[_0x39e9('0x88')]['dy']=0x0;break;}}}if(exits[_0xc1dfc2]['direction']==_0x39e9('0xc5')){if(this['x']<exits[_0xc1dfc2]['x1']){this[_0x39e9('0x88')]=_0x36b04e[_0xc1dfc2];}else{let _0x282b9b=0x0;for(let _0x5c65a3=0x0;_0x5c65a3<walls[_0x39e9('0x2f')];_0x5c65a3++){if(walls[_0x5c65a3]['x1']>_0x282b9b)_0x282b9b=walls[_0x5c65a3]['x1'];}for(let _0x5c65a3=0x0;_0x5c65a3<exits[_0x39e9('0x2f')];_0x5c65a3++){if(exits[_0x5c65a3]['x1']>_0x282b9b)_0x282b9b=exits[_0x5c65a3]['x1'];}if(this['x']>=_0x282b9b-0xf){this['direction']['dx']=0x1;this[_0x39e9('0x88')]['dy']=0x0;break;}}}}if(exits[_0xc1dfc2]['dy']==0x0){if(exits[_0xc1dfc2]['direction']=='up'){if(this['y']>exits[_0xc1dfc2]['y1']){this[_0x39e9('0x88')]=_0x36b04e[_0xc1dfc2];}else{let _0x2ad0cc=HEIGHT;for(let _0x5c65a3=0x0;_0x5c65a3<walls[_0x39e9('0x2f')];_0x5c65a3++){if(walls[_0x5c65a3]['y1']<_0x2ad0cc)_0x2ad0cc=walls[_0x5c65a3]['y1'];}for(let _0x5c65a3=0x0;_0x5c65a3<exits[_0x39e9('0x2f')];_0x5c65a3++){if(exits[_0x5c65a3]['y1']<_0x2ad0cc)_0x2ad0cc=exits[_0x5c65a3]['y1'];}if(this['y']<=_0x2ad0cc+0xf){this[_0x39e9('0x88')]['dx']=0x0;this[_0x39e9('0x88')]['dy']=-0x1;break;}}}if(exits[_0xc1dfc2][_0x39e9('0x88')]==_0x39e9('0x8a')){if(this['y']<exits[_0xc1dfc2]['y1']){this[_0x39e9('0x88')]=_0x36b04e[_0xc1dfc2];}else{let _0x485bf8=0x0;for(let _0x5c65a3=0x0;_0x5c65a3<walls['length'];_0x5c65a3++){if(walls[_0x5c65a3]['y1']>_0x485bf8)_0x485bf8=walls[_0x5c65a3]['y1'];}for(let _0x5c65a3=0x0;_0x5c65a3<exits['length'];_0x5c65a3++){if(exits[_0x5c65a3]['y1']>_0x485bf8)_0x485bf8=exits[_0x5c65a3]['y1'];}if(this['y']>=_0x485bf8-0xf){this['direction']['dx']=0x0;this[_0x39e9('0x88')]['dy']=0x1;break;}}}}}}if(showVectors){ctx[_0x39e9('0x7f')]();ctx['strokeStyle']=_0x39e9('0xcc');ctx[_0x39e9('0x7e')]=0x1;ctx[_0x39e9('0x82')](this['x'],this['y']);ctx[_0x39e9('0x80')](this['x']+this[_0x39e9('0x88')]['dx'],this['y']+this['direction']['dy']);ctx[_0x39e9('0x81')]();ctx['closePath']();}}['setVelocity'](){this['dV']={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};let _0x267490;let _0x4cc5d2;_0x267490=this['direction']['dx'];_0x4cc5d2=this[_0x39e9('0x88')]['dy'];this['dV'][_0x39e9('0xcb')]=0x6;this['dV'][_0x39e9('0xcd')]=Math[_0x39e9('0xc9')](_0x4cc5d2,_0x267490);this['dV']['dx']=this['dV']['module']*Math[_0x39e9('0xce')](this['dV'][_0x39e9('0xcd')]);this['dV']['dy']=this['dV'][_0x39e9('0xcb')]*Math['sin'](this['dV'][_0x39e9('0xcd')]);}[_0x39e9('0x75')](_0x12b586){this[_0x39e9('0xcf')]=[];this[_0x39e9('0xd0')]=[];this['tau_h']=[];for(let _0x132ef7=0x0;_0x132ef7<_0x12b586[_0x39e9('0x2f')];_0x132ef7++){if(_0x12b586[_0x132ef7]!=this){this[_0x39e9('0xcf')][_0x132ef7]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};this['normal_h'][_0x132ef7]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};this[_0x39e9('0xd1')][_0x132ef7]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};this['distToHuman'][_0x132ef7]['dx']=_0x12b586[_0x132ef7]['x']-this['x'];this[_0x39e9('0xcf')][_0x132ef7]['dy']=_0x12b586[_0x132ef7]['y']-this['y'];this['distToHuman'][_0x132ef7][_0x39e9('0xcb')]=Math['sqrt'](Math[_0x39e9('0xc7')](this[_0x39e9('0xcf')][_0x132ef7]['dx'],0x2)+Math[_0x39e9('0xc7')](this[_0x39e9('0xcf')][_0x132ef7]['dy'],0x2));this['distToHuman'][_0x132ef7][_0x39e9('0xcd')]=Math[_0x39e9('0xc9')](this[_0x39e9('0xcf')][_0x132ef7]['dy'],this[_0x39e9('0xcf')][_0x132ef7]['dx']);this[_0x39e9('0xd0')][_0x132ef7]['dx']=Math['cos'](this[_0x39e9('0xcf')][_0x132ef7][_0x39e9('0xcd')]);this[_0x39e9('0xd0')][_0x132ef7]['dy']=Math[_0x39e9('0xd2')](this[_0x39e9('0xcf')][_0x132ef7][_0x39e9('0xcd')]);this[_0x39e9('0xd1')][_0x132ef7]['dx']=-this[_0x39e9('0xd0')][_0x132ef7]['dy'];this[_0x39e9('0xd1')][_0x132ef7]['dy']=this[_0x39e9('0xd0')][_0x132ef7]['dx'];}else{this['distToHuman'][_0x132ef7]={'dx':0x0,'dy':0x0};}}}[_0x39e9('0xd3')](_0xb4a7e7){this[_0x39e9('0xd4')]=[];this['normal_w']=[];this[_0x39e9('0xd5')]=[];for(let _0x33c6ec=0x0;_0x33c6ec<_0xb4a7e7[_0x39e9('0x2f')];_0x33c6ec++){this[_0x39e9('0xd4')][_0x33c6ec]={'dx':0x0,'dy':0x0,'module':0x0};this[_0x39e9('0xd6')][_0x33c6ec]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};this[_0x39e9('0xd5')][_0x33c6ec]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};if(_0xb4a7e7[_0x33c6ec]['dx']==0x0){if(this['y']>_0xb4a7e7[_0x33c6ec]['y1']&&this['y']<_0xb4a7e7[_0x33c6ec]['y2']){this[_0x39e9('0xd4')][_0x33c6ec]['dx']=_0xb4a7e7[_0x33c6ec]['x1']-this['x'];this[_0x39e9('0xd6')][_0x33c6ec]['dx']=(_0xb4a7e7[_0x33c6ec]['x1']-this['x'])/Math[_0x39e9('0xc8')](_0xb4a7e7[_0x33c6ec]['x1']-this['x']);}else{this[_0x39e9('0xd4')][_0x33c6ec]['dx']=0x0;}}else if(_0xb4a7e7[_0x33c6ec]['dy']==0x0){if(this['x']>_0xb4a7e7[_0x33c6ec]['x1']&&this['x']<_0xb4a7e7[_0x33c6ec]['x2']){this[_0x39e9('0xd4')][_0x33c6ec]['dy']=_0xb4a7e7[_0x33c6ec]['y1']-this['y'];this[_0x39e9('0xd6')][_0x33c6ec]['dy']=(_0xb4a7e7[_0x33c6ec]['y1']-this['y'])/Math[_0x39e9('0xc8')](_0xb4a7e7[_0x33c6ec]['y1']-this['y']);}else{this[_0x39e9('0xd4')][_0x33c6ec]['dy']=0x0;}}this['tau_w'][_0x33c6ec]['dx']=-this[_0x39e9('0xd6')][_0x33c6ec]['dy'];this[_0x39e9('0xd5')][_0x33c6ec]['dy']=this['normal_w'][_0x33c6ec]['dx'];this[_0x39e9('0xd4')][_0x33c6ec][_0x39e9('0xcb')]=Math[_0x39e9('0xc6')](Math[_0x39e9('0xc7')](this[_0x39e9('0xd4')][_0x33c6ec]['dx'],0x2)+Math[_0x39e9('0xc7')](this[_0x39e9('0xd4')][_0x33c6ec]['dy'],0x2));}}['F_2'](_0x95bccb){this[_0x39e9('0xd7')]=[];for(let _0x5a05d7=0x0;_0x5a05d7<_0x95bccb[_0x39e9('0x2f')];_0x5a05d7++){if(_0x95bccb[_0x5a05d7]!=this){this[_0x39e9('0xd7')][_0x5a05d7]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};this[_0x39e9('0xd7')][_0x5a05d7][_0x39e9('0xcb')]=A_h*Math[_0x39e9('0xd8')](this[_0x39e9('0xcf')][_0x5a05d7][_0x39e9('0xcb')]/B_h);this[_0x39e9('0xd7')][_0x5a05d7][_0x39e9('0xcd')]=Math[_0x39e9('0xc9')](this[_0x39e9('0xcf')][_0x5a05d7]['dy'],this['distToHuman'][_0x5a05d7]['dx']);this[_0x39e9('0xd7')][_0x5a05d7]['dx']=this[_0x39e9('0xd7')][_0x5a05d7][_0x39e9('0xcb')]*Math['cos'](this['f_2'][_0x5a05d7][_0x39e9('0xcd')]);this[_0x39e9('0xd7')][_0x5a05d7]['dy']=this[_0x39e9('0xd7')][_0x5a05d7]['module']*Math[_0x39e9('0xd2')](this[_0x39e9('0xd7')][_0x5a05d7][_0x39e9('0xcd')]);}else{this[_0x39e9('0xd7')][_0x5a05d7]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};}}}[_0x39e9('0x77')](_0x5b0b70){this[_0x39e9('0xd9')]=[];for(let _0x267281=0x0;_0x267281<_0x5b0b70['length'];_0x267281++){if(_0x5b0b70[_0x267281]!=this){this[_0x39e9('0xd9')][_0x267281]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};this['f_3'][_0x267281]['dx']=this[_0x39e9('0xcf')][_0x267281]['module']*Heaviside(0x14-this[_0x39e9('0xcf')][_0x267281][_0x39e9('0xcb')])*(k1*this[_0x39e9('0xd0')][_0x267281]['dx']+k2*Vector[_0x39e9('0xda')](this['dV'],this[_0x39e9('0xd1')][_0x267281])*this[_0x39e9('0xd1')][_0x267281]['dx']);this[_0x39e9('0xd9')][_0x267281]['dy']=this['distToHuman'][_0x267281][_0x39e9('0xcb')]*Heaviside(0x14-this['distToHuman'][_0x267281][_0x39e9('0xcb')])*(k1*this[_0x39e9('0xd0')][_0x267281]['dy']+k2*Vector[_0x39e9('0xda')](this['dV'],this[_0x39e9('0xd1')][_0x267281])*this[_0x39e9('0xd1')][_0x267281]['dy']);}else{this['f_3'][_0x267281]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};}}}[_0x39e9('0x78')](_0x5585c4){this[_0x39e9('0xdb')]=[];for(let _0x3f6fb4=0x0;_0x3f6fb4<_0x5585c4[_0x39e9('0x2f')];_0x3f6fb4++){this[_0x39e9('0xdb')][_0x3f6fb4]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};this['f_4'][_0x3f6fb4]['dx']=this[_0x39e9('0xd4')][_0x3f6fb4]['dx']*A_w*Math['exp'](this[_0x39e9('0xd4')][_0x3f6fb4][_0x39e9('0xcb')]/B_w);this[_0x39e9('0xdb')][_0x3f6fb4]['dy']=this['distToWall'][_0x3f6fb4]['dy']*A_w*Math[_0x39e9('0xd8')](this[_0x39e9('0xd4')][_0x3f6fb4][_0x39e9('0xcb')]/B_w);}}['F_5'](_0xe6238b){this[_0x39e9('0xdc')]=[];for(let _0xf9e8db=0x0;_0xf9e8db<_0xe6238b['length'];_0xf9e8db++){this[_0x39e9('0xdc')][_0xf9e8db]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};this[_0x39e9('0xdc')][_0xf9e8db]['dx']=this[_0x39e9('0xd4')][_0xf9e8db][_0x39e9('0xcb')]*Heaviside(0xa-this[_0x39e9('0xd4')][_0xf9e8db][_0x39e9('0xcb')])*(k1*this[_0x39e9('0xd6')][_0xf9e8db]['dx']+k2*Vector[_0x39e9('0xda')](this['dV'],this[_0x39e9('0xd5')][_0xf9e8db])*this[_0x39e9('0xd5')][_0xf9e8db]['dx']);this[_0x39e9('0xdc')][_0xf9e8db]['dy']=this['distToWall'][_0xf9e8db][_0x39e9('0xcb')]*Heaviside(0xa-this[_0x39e9('0xd4')][_0xf9e8db][_0x39e9('0xcb')])*(k1*this[_0x39e9('0xd6')][_0xf9e8db]['dy']+k2*Vector[_0x39e9('0xda')](this['dV'],this[_0x39e9('0xd5')][_0xf9e8db])*this['tau_w'][_0xf9e8db]['dy']);}}[_0x39e9('0xdd')](){let _0x2b6bc4;let _0xd7453c;let _0x34a11c;let _0x362e62;let _0x4d662e;let _0x3dfdf7;_0xd7453c=Vector['sum'](this[_0x39e9('0xd7')]);if(showVectors){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x7d')]=_0x39e9('0xde');ctx[_0x39e9('0x7e')]=0x2;ctx['moveTo'](this['x'],this['y']);ctx[_0x39e9('0x80')](this['x']+0x64*_0xd7453c['dx'],this['y']+0x64*_0xd7453c['dy']);ctx[_0x39e9('0x81')]();ctx['closePath']();}_0x34a11c=Vector[_0x39e9('0xdf')](this[_0x39e9('0xd9')]);if(showVectors){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x7d')]=_0x39e9('0xe0');ctx[_0x39e9('0x7e')]=0x2;ctx[_0x39e9('0x82')](this['x'],this['y']);ctx[_0x39e9('0x80')](this['x']+0x64*_0x34a11c['dx'],this['y']+0x64*_0x34a11c['dy']);ctx[_0x39e9('0x81')]();ctx[_0x39e9('0x85')]();}_0x362e62=Vector[_0x39e9('0xdf')](this['f_4']);if(showVectors){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x7d')]=_0x39e9('0xe1');ctx[_0x39e9('0x7e')]=0x2;ctx[_0x39e9('0x82')](this['x'],this['y']);ctx['lineTo'](this['x']+0x64*_0x362e62['dx'],this['y']+0x64*_0x362e62['dy']);ctx[_0x39e9('0x81')]();ctx[_0x39e9('0x85')]();}_0x4d662e=Vector[_0x39e9('0xdf')](this['f_5']);if(showVectors){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x7d')]=_0x39e9('0xe2');ctx[_0x39e9('0x7e')]=0x2;ctx[_0x39e9('0x82')](this['x'],this['y']);ctx['lineTo'](this['x']+0x64*_0x4d662e['dx'],this['y']+0x64*_0x4d662e['dy']);ctx[_0x39e9('0x81')]();ctx[_0x39e9('0x85')]();}_0x3dfdf7=Vector[_0x39e9('0xdf')]([_0xd7453c,_0x34a11c,_0x362e62,_0x4d662e,this['dV']]);if(showVectors){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x7d')]=_0x39e9('0xe3');ctx[_0x39e9('0x7e')]=0x2;ctx[_0x39e9('0x82')](this['x'],this['y']);ctx['lineTo'](this['x']+0xa*_0x3dfdf7['dx'],this['y']+0xa*_0x3dfdf7['dy']);ctx[_0x39e9('0x81')]();ctx[_0x39e9('0x85')]();}this[_0x39e9('0xe4')]=_0x3dfdf7;}[_0x39e9('0x7b')](){this['velocity']=speed*0.08;this['x']=this['x']+this['velocity']*this[_0x39e9('0xe4')]['dx'];this['y']=this['y']+this[_0x39e9('0xe5')]*this[_0x39e9('0xe4')]['dy'];ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x86')]=_0x39e9('0xe6');ctx[_0x39e9('0x89')](this['x'],this['y'],0xa,0x0,0x2*Math['PI'],![]);ctx[_0x39e9('0x8b')]();ctx[_0x39e9('0x85')]();}[_0x39e9('0x7a')](_0x2b94d4){for(let _0x16bf57=0x0;_0x16bf57<_0x2b94d4[_0x39e9('0x2f')];_0x16bf57++){if(_0x2b94d4[_0x16bf57]['y']>HEIGHT||_0x2b94d4[_0x16bf57]['y']<0x0||_0x2b94d4[_0x16bf57]['x']>WIDTH||_0x2b94d4[_0x16bf57]['x']<0x0){this['f_2'][_0x16bf57]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};this[_0x39e9('0xd9')][_0x16bf57]={'dx':0x0,'dy':0x0,'module':0x0,'angle':0x0};escapedNumber++;}}}}function keyPress(_0x3c3b57){var _0x169f00=window[_0x39e9('0xe7')]?event:_0x3c3b57;if(_0x169f00[_0x39e9('0xe8')]==0x4e&&_0x169f00['ctrlKey']){if(isModified){dialog[_0x39e9('0x21')]({'type':'warning','buttons':[_0x39e9('0x23'),_0x39e9('0x2c'),_0x39e9('0x24')],'title':_0x39e9('0x25'),'message':_0x39e9('0x26')},_0x3f845f=>{if(_0x3f845f==0x0){let _0x31d20e=exportPreset();if(openedFile!=null){savePreset(_0x31d20e);}else{savePresetAs(_0x31d20e);}}if(_0x3f845f==0x1){$(_0x39e9('0x27'))['innerText']=_0x39e9('0xe9');isModified=![];isRunning=![];humansPlaces=[];peopleNumber=0x0;humans=[];speed=0x1;ctx['clearRect'](0x0,0x0,WIDTH,HEIGHT);walls=[];wallsNumber=0x0;exits=[];exitsNumber=0x0;Tools['update']();}});}else{$(_0x39e9('0x27'))[_0x39e9('0xaa')]='untitled';isModified=![];isRunning=![];humansPlaces=[];peopleNumber=0x0;humans=[];speed=0x1;ctx[_0x39e9('0x29')](0x0,0x0,WIDTH,HEIGHT);walls=[];wallsNumber=0x0;exits=[];exitsNumber=0x0;Tools[_0x39e9('0x2a')]();}}if(_0x169f00[_0x39e9('0xe8')]==0x4f&&_0x169f00[_0x39e9('0xea')]){if(isModified){dialog[_0x39e9('0x21')]({'type':'warning','buttons':['Сохранить',_0x39e9('0x2c'),_0x39e9('0x24')],'title':_0x39e9('0x25'),'message':_0x39e9('0x26')},_0x3188ea=>{if(_0x3188ea==0x0){let _0x3f44f0=exportPreset();if(openedFile!=null){savePreset(_0x3f44f0);}else{savePresetAs(_0x3f44f0);}}if(_0x3188ea==0x1){loadPreset();}});}else{loadPreset();}}if(_0x169f00['keyCode']==0x53&&_0x169f00[_0x39e9('0xea')]){let _0x1c6702=exportPreset();if(openedFile!=null){savePreset(_0x1c6702);}else{savePresetAs(_0x1c6702);}}if(_0x169f00[_0x39e9('0xe8')]==0x5a&&_0x169f00[_0x39e9('0xea')])undo();if(_0x169f00[_0x39e9('0xe8')]==0x59&&_0x169f00[_0x39e9('0xea')])redo();}const A_h=-0x5;const B_h=-0xa;const A_w=-0x1;const B_w=-0xa;const k1=-0.8;const k2=-0.2;var peopleNumber=0x0;function placeHumans(){$(_0x39e9('0xa'))['addEventListener'](_0x39e9('0x11'),function(_0x3594d9){if(currentTool==_0x39e9('0x60')){humansPlaces[peopleNumber]={'x':_0x3594d9[_0x39e9('0xba')],'y':_0x3594d9[_0x39e9('0xbb')]};peopleNumber++;ctx[_0x39e9('0x29')](0x0,0x0,WIDTH,HEIGHT);Tools[_0x39e9('0x8c')](step);Tools[_0x39e9('0x8d')]();Tools[_0x39e9('0x72')]();Tools[_0x39e9('0x73')]();for(let _0x5aba58=0x0;_0x5aba58<humansPlaces[_0x39e9('0x2f')];_0x5aba58++){ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x86')]='#1e824c';ctx[_0x39e9('0x89')](humansPlaces[_0x5aba58]['x'],humansPlaces[_0x5aba58]['y'],0xa,0x0,0x2*Math['PI'],![]);ctx[_0x39e9('0x8b')]();ctx['closePath']();}}});$(_0x39e9('0xa'))[_0x39e9('0xf')](_0x39e9('0xb9'),()=>{if(currentTool==_0x39e9('0x60')){$('canvas')[_0x39e9('0x9a')][_0x39e9('0xbc')]=_0x39e9('0xeb');}});}function setDirections(){let _0xa01b30;let _0x5801c0;$(_0x39e9('0xa'))['addEventListener']('mousemove',function(_0x10221d){if(currentTool=='directions'){if(_0xa01b30==undefined){Tools[_0x39e9('0x2a')]();for(let _0x317085=0x0;_0x317085<exits[_0x39e9('0x2f')];_0x317085++){if(_0x10221d[_0x39e9('0xba')]>exits[_0x317085]['x1']-0xa&&_0x10221d[_0x39e9('0xba')]<exits[_0x317085]['x2']+0xa&&_0x10221d[_0x39e9('0xbb')]>exits[_0x317085]['y1']-0xa&&_0x10221d[_0x39e9('0xbb')]<exits[_0x317085]['y2']+0xa){$(_0x39e9('0xa'))[_0x39e9('0x9a')][_0x39e9('0xbc')]='pointer';highlightExit(exits[_0x317085],_0x39e9('0xde'));}}}}});$(_0x39e9('0xa'))[_0x39e9('0xf')](_0x39e9('0x11'),function(_0x494828){if(_0xa01b30!=undefined){document['body'][_0x39e9('0x68')](_0xa01b30);_0xa01b30=undefined;Tools[_0x39e9('0x2a')]();}if(currentTool=='directions'){isModified=!![];$(_0x39e9('0xa9'))[_0x39e9('0xaa')]=_0x39e9('0xbf');for(let _0xa03343=0x0;_0xa03343<exits['length'];_0xa03343++){if(_0x494828['offsetX']>exits[_0xa03343]['x1']-0xa&&_0x494828[_0x39e9('0xba')]<exits[_0xa03343]['x2']+0xa&&_0x494828['offsetY']>exits[_0xa03343]['y1']-0xa&&_0x494828[_0x39e9('0xbb')]<exits[_0xa03343]['y2']+0xa){_0xa01b30=createPopup(_0x494828[_0x39e9('0xba')]-0x28,_0x494828[_0x39e9('0xbb')]+0x28);directionButtons=document[_0x39e9('0x3b')](_0x39e9('0xec'));for(let _0x55c966=0x0;_0x55c966<directionButtons[_0x39e9('0x2f')];_0x55c966++){directionButtons[_0x55c966][_0x39e9('0xf')](_0x39e9('0x11'),function(){exits[_0xa03343][_0x39e9('0x88')]=directionButtons[_0x55c966]['id'];Tools[_0x39e9('0x2a')]();for(let _0x38dbbc=0x0;_0x38dbbc<directionButtons[_0x39e9('0x2f')];_0x38dbbc++){directionButtons[_0x38dbbc][_0x39e9('0x38')]['remove'](_0x39e9('0x3d'));}directionButtons[_0x55c966][_0x39e9('0x38')][_0x39e9('0x3e')]('active');});}}}}});}var wallsNumber=0x0;var exitsNumber=0x0;function setRoom(){let _0x91a25f=![];let _0x339ad7={'x':0x0,'y':0x0};let _0x4f91e7={'x':0x0,'y':0x0};$('canvas')[_0x39e9('0xf')](_0x39e9('0x11'),function(_0x4dcf9c){if(!_0x91a25f&&(currentTool==_0x39e9('0x5d')||currentTool==_0x39e9('0x6e'))){_0x339ad7['x']=step*Math['round'](_0x4dcf9c[_0x39e9('0xba')]/step);_0x339ad7['y']=step*Math[_0x39e9('0x90')](_0x4dcf9c[_0x39e9('0xbb')]/step);_0x91a25f=!![];}else if(_0x91a25f&&(currentTool=='walls'||currentTool==_0x39e9('0x6e'))){_0x91a25f=![];isModified=!![];$(_0x39e9('0xa9'))[_0x39e9('0xaa')]='Файл\x20не\x20сохранен';if(currentTool=='walls'){walls[wallsNumber]={'x1':_0x339ad7['x']<_0x4f91e7['x']?_0x339ad7['x']:_0x4f91e7['x'],'y1':_0x339ad7['y']<_0x4f91e7['y']?_0x339ad7['y']:_0x4f91e7['y'],'x2':_0x339ad7['x']<_0x4f91e7['x']?_0x4f91e7['x']:_0x339ad7['x'],'y2':_0x339ad7['y']<_0x4f91e7['y']?_0x4f91e7['y']:_0x339ad7['y'],'dx':Math[_0x39e9('0xc8')](_0x4f91e7['x']-_0x339ad7['x']),'dy':Math[_0x39e9('0xc8')](_0x4f91e7['y']-_0x339ad7['y'])};operationStack[_0x39e9('0x6b')](currentOperation+0x1);operationStack[_0x39e9('0xa8')]({'type':_0x39e9('0xed'),'object':walls[wallsNumber]});currentOperation++;wallsNumber++;}else if(currentTool==_0x39e9('0x6e')){exits[exitsNumber]={'x1':_0x339ad7['x']<_0x4f91e7['x']?_0x339ad7['x']:_0x4f91e7['x'],'y1':_0x339ad7['y']<_0x4f91e7['y']?_0x339ad7['y']:_0x4f91e7['y'],'x2':_0x339ad7['x']<_0x4f91e7['x']?_0x4f91e7['x']:_0x339ad7['x'],'y2':_0x339ad7['y']<_0x4f91e7['y']?_0x4f91e7['y']:_0x339ad7['y'],'dx':Math[_0x39e9('0xc8')](_0x4f91e7['x']-_0x339ad7['x']),'dy':Math['abs'](_0x4f91e7['y']-_0x339ad7['y'])};operationStack[_0x39e9('0x6b')](currentOperation+0x1);operationStack[_0x39e9('0xa8')]({'type':'exit','object':exits[exitsNumber]});currentOperation++;exitsNumber++;}if(currentOperation>-0x1){$(_0x39e9('0x2e'))[_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));$(_0x39e9('0x2e'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]='img/undo-active.svg';}else{$(_0x39e9('0x2e'))[_0x39e9('0x38')]['add']('disabled');$(_0x39e9('0x2e'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0x6d');}if(currentOperation+0x1!=operationStack[_0x39e9('0x2f')]){$(_0x39e9('0x30'))[_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));$(_0x39e9('0x30'))[_0x39e9('0x32')][0x1]['src']=_0x39e9('0xee');}else{$('redoButton')['classList'][_0x39e9('0x3e')](_0x39e9('0x3f'));$(_0x39e9('0x30'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0xef');}Tools[_0x39e9('0x2a')]();}},![]);$('canvas')[_0x39e9('0xf')](_0x39e9('0xb9'),function(_0x46787b){if(currentTool==_0x39e9('0x5d')||currentTool==_0x39e9('0x6e')){$(_0x39e9('0xa'))[_0x39e9('0x9a')][_0x39e9('0xbc')]=_0x39e9('0xeb');if(_0x91a25f){Tools[_0x39e9('0x2a')]();ctx[_0x39e9('0x7f')]();if(currentTool==_0x39e9('0x5d')){ctx[_0x39e9('0x7d')]=_0x39e9('0x83');ctx['lineWidth']=0x4;}else if(currentTool==_0x39e9('0x6e')){ctx[_0x39e9('0x7d')]=_0x39e9('0x84');ctx[_0x39e9('0x7e')]=0x2;}ctx[_0x39e9('0x82')](_0x339ad7['x'],_0x339ad7['y']);if(Math[_0x39e9('0xc8')](_0x46787b['offsetX']-_0x339ad7['x'])>Math[_0x39e9('0xc8')](_0x46787b[_0x39e9('0xbb')]-_0x339ad7['y'])){_0x4f91e7['x']=step*Math['round'](_0x46787b[_0x39e9('0xba')]/step);_0x4f91e7['y']=_0x339ad7['y'];}else{_0x4f91e7['x']=_0x339ad7['x'];_0x4f91e7['y']=step*Math[_0x39e9('0x90')](_0x46787b[_0x39e9('0xbb')]/step);}ctx[_0x39e9('0x80')](_0x4f91e7['x'],_0x4f91e7['y']);ctx[_0x39e9('0x81')]();ctx[_0x39e9('0x85')]();ctx[_0x39e9('0x7f')]();ctx[_0x39e9('0x7d')]=_0x39e9('0xde');ctx['lineWidth']=0.5;ctx[_0x39e9('0x82')](0x0,_0x4f91e7['y']);ctx['lineTo'](WIDTH,_0x4f91e7['y']);ctx[_0x39e9('0x82')](_0x4f91e7['x'],0x0);ctx[_0x39e9('0x80')](_0x4f91e7['x'],HEIGHT);ctx[_0x39e9('0x81')]();ctx['closePath']();}}else{$('canvas')['style'][_0x39e9('0xbc')]=_0x39e9('0xf0');}});}function createToolbox(){setRoom();setDirections();erase();placeHumans();let _0x153ba4=document[_0x39e9('0x3b')]('.toolbox-item');for(let _0x335697=0x0;_0x335697<_0x153ba4[_0x39e9('0x2f')];_0x335697++){_0x153ba4[_0x335697][_0x39e9('0xf')]('click',function(){currentTool=_0x153ba4[_0x335697][_0x39e9('0x93')][_0x39e9('0xf1')];for(let _0x31d172=0x0;_0x31d172<_0x153ba4[_0x39e9('0x2f')];_0x31d172++){_0x153ba4[_0x31d172]['classList'][_0x39e9('0x39')](_0x39e9('0x3d'));}_0x153ba4[_0x335697]['classList'][_0x39e9('0x3e')](_0x39e9('0x3d'));},![]);}}function undo(){let _0x3032d3=operationStack[currentOperation];if(_0x3032d3[_0x39e9('0xf2')]==_0x39e9('0xed')){walls[_0x39e9('0x6b')](walls[_0x39e9('0x2f')]-0x1,0x1);wallsNumber=wallsNumber>0x0?wallsNumber-0x1:wallsNumber;}if(_0x3032d3['type']==_0x39e9('0x55')){exits[_0x39e9('0x6b')](exits[_0x39e9('0x2f')]-0x1,0x1);exitsNumber=exitsNumber>0x0?exitsNumber-0x1:exitsNumber;}if(_0x3032d3[_0x39e9('0xf2')]==_0x39e9('0xc0')){walls[_0x39e9('0xa8')](_0x3032d3[_0x39e9('0xf3')]);wallsNumber++;}if(_0x3032d3['type']=='erase-exit'){exits['push'](_0x3032d3[_0x39e9('0xf3')]);exitsNumber++;}if(_0x3032d3[_0x39e9('0xf2')]==_0x39e9('0x6c')){walls=_0x3032d3[_0x39e9('0xf3')]['walls'];exits=_0x3032d3['object']['exits'];wallsNumber=walls[_0x39e9('0x2f')]+0x1;exitsNumber=exits[_0x39e9('0x2f')]+0x1;}if(currentOperation>-0x1){currentOperation--;}if(currentOperation==-0x1){$(_0x39e9('0x2e'))['classList']['add'](_0x39e9('0x3f'));$(_0x39e9('0x2e'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0x6d');}else{$(_0x39e9('0x2e'))[_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));$(_0x39e9('0x2e'))['childNodes'][0x1]['src']=_0x39e9('0xc1');}if(currentOperation+0x1!=operationStack[_0x39e9('0x2f')]){$(_0x39e9('0x30'))[_0x39e9('0x38')][_0x39e9('0x39')]('disabled');$(_0x39e9('0x30'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0xee');}else{$(_0x39e9('0x30'))[_0x39e9('0x38')][_0x39e9('0x3e')]('disabled');$('redoButton')['childNodes'][0x1]['src']=_0x39e9('0xef');}Tools[_0x39e9('0x2a')]();}function redo(){if(currentOperation+0x1!=operationStack['length']){let _0x536e28=operationStack[currentOperation+0x1];if(_0x536e28[_0x39e9('0xf2')]=='wall'){walls[_0x39e9('0xa8')](_0x536e28[_0x39e9('0xf3')]);wallsNumber++;}if(_0x536e28[_0x39e9('0xf2')]=='exit'){exits[_0x39e9('0xa8')](_0x536e28[_0x39e9('0xf3')]);exitsNumber++;}if(_0x536e28['type']==_0x39e9('0xc0')){let _0x2ecd8f;for(_0x2ecd8f=0x0;_0x2ecd8f<walls['length'];_0x2ecd8f++){if(walls[_0x2ecd8f]==_0x536e28[_0x39e9('0xf3')])break;}walls[_0x39e9('0x6b')](_0x2ecd8f,0x1);}if(_0x536e28['type']==_0x39e9('0xc2')){let _0x3562d8;for(_0x3562d8=0x0;_0x3562d8<exits[_0x39e9('0x2f')];_0x3562d8++){if(exits[_0x3562d8]==_0x536e28[_0x39e9('0xf3')])break;}exits['splice'](_0x3562d8,0x1);}if(_0x536e28[_0x39e9('0xf2')]==_0x39e9('0x6c')){operationStack[_0x39e9('0x6b')](currentOperation+0x1);operationStack[_0x39e9('0xa8')]({'type':_0x39e9('0x6c'),'object':{'walls':walls,'exits':exits}});ctx[_0x39e9('0x29')](0x0,0x0,WIDTH,HEIGHT);walls=[];exits=[];humans=[];wallsNumber=0x0;exitsNumber=0x0;peopleNumber=0x0;Tools['update']();}currentOperation++;if(currentOperation+0x1!=operationStack['length']){$(_0x39e9('0x30'))[_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));$(_0x39e9('0x30'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]='img/redo-active.svg';}else{$(_0x39e9('0x30'))[_0x39e9('0x38')][_0x39e9('0x3e')](_0x39e9('0x3f'));$(_0x39e9('0x30'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0xef');}if(currentOperation==-0x1){$(_0x39e9('0x2e'))[_0x39e9('0x38')]['add'](_0x39e9('0x3f'));$(_0x39e9('0x2e'))['childNodes'][0x1][_0x39e9('0x33')]=_0x39e9('0x6d');}else{$(_0x39e9('0x2e'))[_0x39e9('0x38')][_0x39e9('0x39')](_0x39e9('0x3f'));$(_0x39e9('0x2e'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0xc1');}Tools[_0x39e9('0x2a')]();}else{$(_0x39e9('0x30'))['classList'][_0x39e9('0x3e')](_0x39e9('0x3f'));$(_0x39e9('0x30'))[_0x39e9('0x32')][0x1][_0x39e9('0x33')]=_0x39e9('0xef');}}function _0x24c218(_0x29596c){function _0x1b00d2(_0x1647ef){if(typeof _0x1647ef===_0x39e9('0xf4')){return function(_0x55d107){}[_0x39e9('0xf5')](_0x39e9('0xf6'))[_0x39e9('0xf7')](_0x39e9('0xf8'));}else{if((''+_0x1647ef/_0x1647ef)['length']!==0x1||_0x1647ef%0x14===0x0){(function(){return!![];}[_0x39e9('0xf5')]('debu'+_0x39e9('0xf9'))[_0x39e9('0xfa')](_0x39e9('0xfb')));}else{(function(){return![];}[_0x39e9('0xf5')](_0x39e9('0xfc')+_0x39e9('0xf9'))[_0x39e9('0xf7')](_0x39e9('0xfd')));}}_0x1b00d2(++_0x1647ef);}try{if(_0x29596c){return _0x1b00d2;}else{_0x1b00d2(0x0);}}catch(_0x21c0c6){}}